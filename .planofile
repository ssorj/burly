# XXX For the which problem
CYGWIN = call("uname").startswith("CYGWIN")

@command
def test(coverage=False):
    check_program("bats")

    if coverage:
        check_program("kcov")

        run(f"kcov {get_current_dir()}/coverage bats tests.sh")
    else:
        run(f"bats tests.sh")

@command
def lint():
    """
    Use shellcheck to scan for problems
    """

    check_program("shellcheck")

    run("shellcheck --shell sh --enable all --exclude SC3043 burly.sh")

@command
def clean():
    remove("build")
    remove("coverage")
