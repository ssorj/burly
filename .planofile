@command
def test(verbose=False, coverage=False):
    if WINDOWS:
        print(111, ENV.get("PATHEXT"))

    check_program("bats")

    if coverage:
        check_program("kcov")

        run(f"kcov ~/coverage bats {'--trace' if verbose else ''} tests.sh")
    else:
        run(f"bats {'--trace' if verbose else ''} tests.sh")

@command
def lint():
    """
    Use shellcheck to scan for problems
    """

    check_program("shellcheck")

    run("shellcheck --shell sh --enable all --exclude SC3043 burly.sh")

@command
def clean():
    remove("build")
    remove("coverage")
